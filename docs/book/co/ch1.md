# 第一篇：概论

## 1.0 计算机历史

1.1 世界第一台通用计算机产生于 1946 年，采用十进制来实现。

1.2 由于第一台计算机没有存储程序带来了很多弊端，于是冯·诺依曼开始设计存储程序的计算机并于 1945 年提出了方案，简称 IAS。

1.3 世界上第一台带有存储程序的计算机于 1949 年由英国剑桥大学完成。而冯·诺依曼设计的带存储程序的计算机于 1951 年完成。

## 2.0 计算机的基本组成

计算机可以分为**硬件**和**软件**两部分，其中软件又分为**系统软件**和**应用软件**。

系统软件例如操作系统，编译器，数据库管理系统，网络软件等。而应用软件例如 QQ ，浏览器等。

系统复杂性管理的方法：抽象化，层次化（划分多个模块），模块化（定义明确的功能和接口），规则性（更大程度上的复用模块）。

计算机体系结构：程序员所见到的计算机系统的属性概念性的结构与功能特性。（指令系统，数据类型，寻址技术，I/O机理）定义了软硬件的界限。

计算机组成：实现计算机体系结构所体现的属性。（具体指令的实现）

## 3.0 冯诺依曼架构

冯诺依曼架构的核心的**带存储程序**，其中带存储程序的计算机指可以计算机可以**提前存储程序**。而程序由指令组成，一旦程序启动可自动读取指令并执行指令。

几乎所有的通用计算机都采用冯·诺依曼结构，因此 IAS 是现代计算机的原型机。

### 3.1 冯诺依曼结构的组成

首先要由**存储程序**和**数据**的地方，这个地方称为主存。（存储器）

其次要有读取程序的部件，其中程序由指令构成，读取程序其实就是读取每一条指令。（控制器）

读取指令下一步就是执行指令，根据具体指令进行运算，指令描述了如何对数据进行处理。（运算器）

计算机要有能够输入程序和数据的部件，还要有现实结果的部件，也就是输入输出。（输入和输出）

以上其实就是 IAS 计算机结构。

### 3.2 冯诺依曼结构组要思想

总结：冯诺依曼结构由运算器，控制器，存储器，输入和输出五部分组成。

![](https://cdn.jsdelivr.net/gh/weijiew/pic@master/images/20200820210523.png)

注意：存储器存储的不仅仅是数据还有指令，计算机可以区分数据和指令。控制器可以取出指令。运算器可以执行指令，此处的执行指加减乘除，还有逻辑运算和附加运算。而输入输出则指实现了操作人员同主机之间的通信。

数据和指令在计算机内部均以**二进制**表示。其中指令分为两部分，分别由**操作码**和**地址码**两部分组成。操作码指**操作类型**，地址码指**操作数的地址**。也就是当前指令的存储地址。

以上实现了自动处理程序。





## 4.0 现代计算机结构模型

一下介绍现代计算机结构模型，其实就是在冯诺依曼结构的基础上进一步的细化。

![image](https://cdn.jsdelivr.net/gh/weijiew/pic@master/images/image.2avdk8copt1c.png)

1. 存储器，也就是内存，用于存放程序和数据。存储器内部有多个存储单元，每一个存储单元都有编号。

2. 控制器，用于控制读取指令。

3. ALU 算术逻辑部件，进行算术操作和逻辑操作。输入可以是存储器，也可以是寄存器。

4. 通过 ALU 将运算结果计算出来后可**直接**放入**寄存器**中，也可以通过总线（MDR）存入存储器中，或者通过总线（MDR）存入寄存器中。

5. 运算过程中不仅仅产生最终的数据，还会产生中间的信息。例如进位，对后续的操作会造成影响，这些信息称为标志信息。这些信息存储在标志寄存器中，最终被送到控制器中，由控制器根据标志信息来影响后续操作。

6. 指令在执行之前，该指令的地址会首先存入程序计数器（PC）中，执行之时会将程序计数器（PC）中的指令存入 MAR （Memory Address register） 中，然后通过总线和存储器交互。

7. 指令是先从送到 MDR 中，然后存入 IR 中，最后将指令中操作码字段送入控制器中进行译码。

8. CPU 和主存之间是通过总线相连，总线分为地址线，控制线，数据线。而主存和输入输出设备相连接，实现数据的交互。

9. 现代计算机和冯诺依曼结构几乎相同。

### 4.1 存储器

指令和数据都是保存在存储器中，本质上都是 0/1 序列。

![](https://cdn.jsdelivr.net/gh/weijiew/pic@master/images/20200820212547.png)

存储器内部有**存储体**，存储体内部有**存储单元**，存储单元内部则是**存储元件**。

存储元件表示存储一位 0/1，存储单元则是存放一串二进制代码，存储字是存储单元中二进制代码的组成，存储字长是存储单元中二进制代码的长度。

MAR 和 MDR 都是寄存器，二者用来存放**存储体**的信息。

MAR 存储器地址寄存器，反应存储单元的个数。

MDR 存储器数据寄存器，反应了存储字长。存放了**出去的数据**和**写入的数据**，作为临时中转的存在。

MAR 和 MDR 确定了存储体存放的数据量。前者确定了存储器的地址长度，后者确定了单位地址的容量，也就是存储字长。

指令中包含由操作码，操作数（算术运算，逻辑运算），注意单目运算（取反）一个操作数，而双目则是两个。

目的操作数地址，这个具体信息要看数据最终存放到哪里，如果是寄存器中，那么存储的就是寄存器的编号，如果是内存中，那么就是内存的地址。

### 4.2 运算器

运算器的结构，功能，如何工作？

运算器的组成：（不同的计算机存在差异）

![](https://cdn.jsdelivr.net/gh/weijiew/pic@master/images/20200820213854.png)

ALU 是算术运算单元，组合电路，如果输入撤销，输出也相应撤销，无法保存数据。所以需要两个寄存器来保存数据。

MQ 寄存器用来存放 ACC 装不下去的数据，例如乘法会导致数据长度增加，多出来的部分装在了 ACC 中。

### 4.3 控制器

控制器的基本结构，功能？

控制器的组成：取指令，分析指令，执行指令。

![](https://cdn.jsdelivr.net/gh/weijiew/pic@master/images/20200820220642.png)

指令的地址存放在 PC 里面。

IR 存放当前要执行的指令

### 4.4 计算机硬件的主要技术指标

1. 机器字长，也就是 32/64 位的机器。CPU 一次能处理数据的位数。CPU 中的寄存器位数相关。
2. 运算速度
   1. 主频越高速度越快。核数以及每个核支持的线程数。
   2. 吉普森法。
   3. CPI 执行一条指令所需要时钟周期数。
   4. MIPS 每秒执行的指令数。
   5. FLOPS 每秒浮点运算次数。

3. 存储容量：存放二进制信息的总位数。
   1. 主存
      1. 存储单元格式 * 存储字长
   2. 辅存
      1. 字节数


## 5.0 编程语言

最早的程序语言是在纸片上打孔实现的。其实就是二进制，也就是机器语言，弊端很显然，不灵活且难以理解和书写。

汇编语言采用符号表示，对数据进行了抽象。其中采用助记符来表示操作码。用标号表示位置，用助记符表示寄存器。

例如加法，在机器语言中加法是一堆二进制数，而在汇编中则是字符（add）来实现。

但是计算机只能识别二进制数，无法识别汇编字符，所以需要用汇编程序将字符转换称机器语言。

